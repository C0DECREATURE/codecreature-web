"use strict";var fullImage="",fullImageList=[],curFullImage="",initFullImageCalled=!1;function initFullImage(){if(!initFullImageCalled){initFullImageCalled=!0;let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="/js/full-image.css?fileversion=9",document.querySelector("HEAD").appendChild(t),document.querySelector(".full-image-view")?fullImage=document.querySelector(".full-image-view"):(fullImage=document.createElement("div")).classList.add("full-image-view"),fullImage.innerHTML='\n\t\t\t<div class="fiv-clicker"></div>\n\t\t\t\t<button class="fiv-close" aria-label="close image full view">\n\t\t\t\t\t<i class="svg-icon svg-icon-outline svg-icon-bold" data-icon="rounded-x"></i>\n\t\t\t\t</button>\n\t\t\t<button class="fiv-prev" aria-label="previous image">\n\t\t\t\t<i class="svg-icon svg-icon-solid" data-icon="rounded-caret-left"></i>\n\t\t\t</button>\n\t\t\t<button class="fiv-next" aria-label="next image">\n\t\t\t\t<i class="svg-icon svg-icon-solid" data-icon="rounded-caret-right"></i>\n\t\t\t</button>\n\t\t\t<div class="fiv-content">\n\t\t\t\t<img src="" alt="">\n\t\t\t\t<p class="credit"></p>\n\t\t\t\t<p class="caption"></p>\n\t\t\t\t<p class="alt" aria-hidden="true"></p>\n\t\t\t</div>\n\t\t',document.querySelector("body").appendChild(fullImage),fullImage.querySelector(".fiv-clicker").addEventListener("click",closeFullImage),fullImage.querySelector(".fiv-close").addEventListener("click",closeFullImage),fullImage.querySelector(".fiv-prev").addEventListener("click",openPrevFullImage),fullImage.querySelector(".fiv-next").addEventListener("click",openNextFullImage),fullImageList=document.getElementsByClassName("full-viewable");for(let t=0;t<fullImageList.length;t++){var e=fullImageList[t];e.dataset.fullImageListIndex=t,e.addEventListener("click",(function(){openFullImage(this)}))}document.addEventListener("keydown",(function(e){"block"==fullImage.style.display&&("Escape"===e.key?closeFullImage():"ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),openNextFullImage()):"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||(e.preventDefault(),openPrevFullImage()))})),console.log("full image view setup complete")}}window.addEventListener("load",(()=>{"undefined"!=typeof dontAutoInitFIV&&dontAutoInitFIV||initFullImage()}));let touchstartX=0,touchendX=0,touchstartY=0,touchendY=0;function checkFITouchInput(){if("block"==fullImage.style.display){Math.abs(touchendX-touchstartX)>30&&Math.abs(touchendX-touchstartX)>Math.abs(touchendY-touchstartY)&&(touchendX<touchstartX&&openNextFullImage(),touchendX>touchstartX&&openPrevFullImage())}}function openPrevFullImage(){var e=Number(curFullImage)-1;e<0&&(e=fullImageList.length-1),openFullImage(fullImageList[e]),fullImageList[e].scrollIntoView({behavior:"smooth"})}function openNextFullImage(){var e=Number(curFullImage)+1;e>=fullImageList.length&&(e=0),openFullImage(fullImageList[e]),fullImageList[e].scrollIntoView({behavior:"smooth",block:"nearest"})}function openFullImage(e){var t,l="";if("img"==e.tagName.toLowerCase())t=e.src,e.alt&&(l=e.alt);else{if("string"!=typeof e.style.backgroundImage)return void console.log("no valid image found");t=(t=e.style.backgroundImage).substring(5,t.length-2),e.dataset.alt&&(l=e.dataset.alt)}curFullImage=e.dataset.fullImageListIndex;let a=Number(curFullImage)+1;console.log("opening full image #"+a+": "+t),fullImage.querySelector("img").src=t;var n=e.dataset.credit,u=e.dataset.creditLabel;if(n){let e='<a href="'+n+'">';e+=u?u+"</a>":"credit</a>",fullImage.querySelector(".credit").innerHTML=e}else fullImage.querySelector(".credit").innerHTML="";var o=e.dataset.caption;if(fullImage.querySelector(".caption").innerHTML=o||"",l&&""!=l){fullImage.querySelector("img").alt=l;let e="";(n||o)&&(e+="<hr>"),fullImage.querySelector(".alt").innerHTML=e+"alt text: "+l}else fullImage.querySelector(".alt").innerHTML="";fullImage.style.display="block"}function closeFullImage(){fullImage.style.display="none"}document.addEventListener("touchstart",(e=>{touchstartX=e.changedTouches[0].screenX,touchstartY=e.changedTouches[0].screenY})),document.addEventListener("touchend",(e=>{touchendX=e.changedTouches[0].screenX,touchendY=e.changedTouches[0].screenY,checkFITouchInput()}));