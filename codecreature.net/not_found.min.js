"use strict";var boxCount=0,maxZ=20,complaints=0;function newDragBox(e){var t=e.type,n=e.title,i=e.icon,o=e.iconFlash,r=e.txt,l=e.lbtn,s=e.lClick,a=e.rbtn,d=e.rClick,c=e.url,u=e.skipAd,p=e.download,m=document.getElementById(t),g=m.cloneNode(!0);if(boxCount+=1,g.id=t+boxCount,g.style.display="block",boxToTop(g),boxCount>1&&window.innerWidth>640?(g.style.top=Math.floor(80*Math.random())+1+"%",g.style.right=Math.floor(50*Math.random())+1+"%"):boxCount>1&&(g.style.top=Math.floor(80*Math.random())+1+"%"),g.querySelector("#title")&&n&&(g.querySelector("#title").innerHTML=n),g.querySelector("#icon")&&i&&(g.querySelector("#icon").src=i,1==o&&g.querySelector("#icon").classList.add("flashing")),"adbox"==t&&i){var h=document.createElement("a");h.classList.add("link");var b=document.createElement("img");b.src=i,b.classList.add("ad"),b.onload=function(){boxParent(this).style.width=Math.min(.9*window.screen.width,b.width,650)+"px"},h.appendChild(b),g.querySelector("#content").appendChild(h)}var x=g.querySelector(".link");x&&(c?"a"==typeof x?x.src=c:g.querySelector(".link").setAttribute("onclick",'boxToTop(boxParent(this)); window.open("'+c+'");'):p&&("img"==p&&i&&(p=i),x.download=n,x.href=p)),g.querySelector("#right")&&r&&(g.querySelector("#right").innerHTML=r),g.querySelector("#lbtn")&&l&&s&&(g.querySelector("#lbtn").innerHTML="<span>"+l+"</span>",g.querySelector("#lbtn").setAttribute("onclick",s)),g.querySelector("#rbtn")&&a&&d&&(g.querySelector("#rbtn").innerHTML="<span>"+a+"</span>",g.querySelector("#rbtn").setAttribute("onclick",d)),g.querySelector("#content")&&e.html&&(g.querySelector("#content").innerHTML+=e.html),e.width&&(g.style.width=e.width),g.querySelectorAll("a,button,.x,.link").forEach((function(e){e.addEventListener("focus",(function(){boxToTop(boxParent(this))}))})),m.parentNode.appendChild(g),dragElement(g),"adbox"!=t&&1!=u&&newAd()}function removeBox(e){boxCount-=1,e.remove(),0==boxCount&&makeDefaultBox()}function boxParent(e){return e.parentNode==document?null:e.classList.contains("dragbox")?e:boxParent(e.parentNode)}function disableBox(e){e.querySelector("#lbtn").disabled="disabled",e.querySelector("#rbtn").disabled="disabled"}function boxToTop(e){maxZ+=1,e.style.zIndex=maxZ}function makeDefaultBox(e){newDragBox({type:"errorbox",title:"Error: Broken Link",icon:"/graphix/icons/warning.png",iconFlash:!0,txt:"File or directory at '"+window.location.pathname+"' not found.<br>Click below for assistance.",lbtn:"home",lClick:"window.location.href='/home';",rbtn:"help me",rClick:"makeHelpBox();",skipAd:e})}function makeHelpBox(){newDragBox({type:"errorbox",title:"Error: Request Denied",icon:"/graphix/icons/warning.png",iconFlash:!0,txt:"Your help request has been denied. Would you like to submit a complaint?",lbtn:"no",lClick:"removeBox(boxParent(this))",rbtn:"yes",rClick:"addComplaint(); makeComplaintBox();"})}function makeComplaintBox(){newDragBox({type:"errorbox",title:"Complaints Department",icon:"/graphix/deco/smiley-spin-yellow.gif",txt:"<span>Complaints received: <span class='complaint-count'>"+complaints+"</span>\n\t\t\t<br>Submit another complaint?</span>",lbtn:"no",lClick:"removeBox(boxParent(this));",rbtn:"yes",rClick:"addComplaint();newAd();"})}function addComplaint(){complaints+=1;for(var e=document.querySelectorAll(".complaint-count"),t=0;t<e.length;t++)e[t].innerHTML=complaints}var popupAds=[{img:"send_me_your_teeth.jpg",title:"PLEASE",url:"/shrines/teeth"},{img:"send_me_your_teeth.jpg",title:"PLEASE",url:"/shrines/teeth"},{img:"/shrines/homestuck/images/~ATH_for_dummies.jpg",title:"Learn Code!",url:"/shrines/homestuck/~ATH-handbook"},{img:"/shrines/homestuck/images/~ATH_for_dummies.jpg",title:"Learn Code!",url:"/shrines/homestuck/~ATH-handbook"},{img:"/graphix/ads/popup/garfield_posters.gif",title:"New Posters!",url:"/shrines/garf/posters"},{img:"/graphix/ads/popup/garfield_posters.gif",title:"New Posters!",url:"/shrines/garf/posters"},{img:"piracy-crime.gif",url:"https://fmhy.net/beginners-guide",title:"<img src='/graphix/icons/warning.png'> REPORT NOW"},{img:"report-piracy.gif",url:"https://fmhy.net/beginners-guide",title:"<img src='/graphix/icons/warning.png'> REPORT NOW"},{img:"fbi-warning.gif",url:"https://fmhy.net/beginners-guide",title:"<img src='/graphix/icons/warning.png'> REPORT NOW"},{img:"shop-joann.jpg",url:"",title:"REST IN PEACE"},{img:"arm-pasta.jpg",title:"INSOMNIA IS OVER!"},{img:"caiman.jpg",title:"REJECT HUMANITY TODAY"},{img:"malevolent-god.jpg",title:"SPECIAL INVITATION"},{img:"nope-spray.jpg",title:"PROTECT YOURSELF!"},{img:"shape-delivery.jpg"},{img:"the-zone.jpg",title:"ENTER!!"},{img:"place-him-on-your-site.gif",title:"DO IT",download:"img"},{title:"NEW SITES",html:'<iframe width="180" height="180" src="https://dimden.neocities.org/navlink/" name="neolink"></iframe>',width:"190px"},{title:"NEW SITES",html:'<iframe width="180" height="180" src="https://dimden.neocities.org/navlink/" name="neolink"></iframe>',width:"190px"}],unusedAds=[];function newAd(){0==unusedAds.length&&(unusedAds=popupAds.slice(0));var e=Math.floor(Math.random()*unusedAds.length),t="";t=unusedAds[e].title?unusedAds[e].title:unusedAds[e].url?"<img src='/graphix/deco/smiley-spin-yellow.gif'> CLICK NOW":"<img src='/graphix/deco/smiley-spin-green.gif'> URGENT MESSAGE";var n=unusedAds[e].img;n&&"/"!=n[0]&&(n="/graphix/ads/popup/"+n),newDragBox({type:"adbox",title:t,icon:n,url:unusedAds[e].url,download:unusedAds[e].download,html:unusedAds[e].html,width:unusedAds[e].width}),unusedAds.splice(e,1)}window.addEventListener("load",(function(){setInterval((function(){for(var e=document.querySelectorAll(".flashing"),t=0;t<e.length;t++){var n=e[t];n.classList.contains("off")?n.classList.remove("off"):n.classList.add("off")}}),350)}),!1);